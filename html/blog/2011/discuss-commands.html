
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Discussion on Commands &mdash; HTSQL</title>
    
    <link rel="stylesheet" href="../../_static/common.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/htsqldoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/htrafdemo.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.3.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/htrafdemo.js"></script>
  
    <link rel="top" title="HTSQL" href="../../index.html" />
    <link rel="up" title="2011 HTSQL News Archive" href="index.html" />
    <link rel="next" title="HTSQL 2.X Usability Discussion" href="discuss-usability.html" />
    <link rel="prev" title="Discussion on Catalog" href="discuss-catalog.html" />
  <link rel="alternate" type="application/rss+xml" title="HTSQL News" href="http://htsql.org/index.rss" />
 
  </head>
  <body>

  <div class="header">
    <div class="header-inner">
      <a href="/"><img class="header-logo" src="../../_static/rabbit-logo.png" alt="HTSQL(tm)"></a>
      <ul class="navigation">
        <li><a href="/blog/">News</a></li>
        <li><a href="/doc/">Documentation</a></li>
        <li><a href="/gallery/">Gallery</a></li>
        <li><a href="/download/">Download</a></li>
        <li><a href="/community/">Community</a></li>
      </ul>
      <div id="searchbox" style="display: none">
        <form class="search" action="../../search.html" method="get">
          <input class="search-input" type="text" name="q" size="20" placeholder="Search&hellip;" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
      </div>
      <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
  </div>



    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="discussion-on-commands">
<h1>Discussion on Commands<a class="headerlink" href="#discussion-on-commands" title="Permalink to this headline">¶</a></h1>
<p class="blog-published">Published by <em class="blog-author">cce</em> on <em class="blog-date">2011-07-26</em></p>
<p>In HTSQL, we&#8217;d like commands and functions to have the same syntax.
How do we make this work?</p>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>Currently formatters are handled as a special case, for
example, <tt class="docutils literal"><span class="pre">/school/:csv</span></tt>.  We&#8217;d like this to be equivalent
(using postfix syntax) to <tt class="docutils literal"><span class="pre">/csv(/school)</span></tt>.  Broadly speaking,
we&#8217;d like commands to have same syntax as functions.  The
challenge here is how to get from the internal syntax tree to
the WSGI output.  Is binding different?  What are the other
translation phases to get to the formatted output.</p>
<p>Our previous approach (in 1.x) had a separate syntax for
commands and each command was responsible for translating it&#8217;s
arguments into an output. We had command chaining via typed
pipeline.  Commands had input/output interface with a set of
types: SYNTAX (a syntax tree), PRODUCT (tabular output of an
SQL query), RENDER (WSGI output), among others.</p>
<p>In this version, we need a pipeline support, but we should
assume that they would be supported by nested commands.  For
example, suppose we have a <tt class="docutils literal"><span class="pre">/meta()</span></tt> command that executes
its argument on the meta-data structure for the current
context.  Hence, <tt class="docutils literal"><span class="pre">/html(/meta(/column))</span></tt> would produce an
HTML formatted table listing columns currently available to
the current user. This query could also be written in
postfix syntax as <tt class="docutils literal"><span class="pre">/column/:meta/:html</span></tt>.</p>
<p>So what happens after a syntax tree?  What is the result of
the translation and how do we convert this to final output.</p>
</div>
</div>
<div class="blog-disqus">
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = "htsql";
var disqus_identifier = "/blog/2011/discuss-commands";
var disqus_title = "Discussion on Commands";

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

  <div class="footer">
    <div class="footer-inner">
      <span class="copyright">
        Copyright &copy; 2006-2012
        <a href="http://prometheusresearch.com/">Prometheus Research LLC</a>
      </span>
      <ul class="community-links">
        <li><a href="/index.rss">RSS</a></li>
        <li><a href="http://twitter.com/htsql">twitter</a></li>
        <li><a href="irc://irc.freenode.net#htsql">IRC</a></li>
        <li><a href="http://lists.htsql.org/mailman/listinfo/htsql-users">mailing list</a></li>
        <li><a href="http://bitbucket.org/prometheus/htsql/issues/new">report a bug</a></li>
        <li><a href="http://bitbucket.org/prometheus/htsql/">source code</a></li>
        <li><a href="http://prometheusresearch.com/">commercial support</a></li>
      </ul>
    </div>
  </div>

  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11527623-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>


  </body>
</html>